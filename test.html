<!-- <!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Cesium KML Example with Token</title>
  <script src="https://cesium.com/downloads/cesiumjs/releases/1.119/Build/Cesium/Cesium.js"></script>
  <link href="https://cesium.com/downloads/cesiumjs/releases/1.119/Build/Cesium/Widgets/widgets.css" rel="stylesheet">
  <style>
    html, body, #cesiumContainer {
      width: 100%;
      height: 100%;
      margin: 0;
      padding: 0;
      overflow: hidden;
    }
  </style>
</head>
<body>
  <div id="cesiumContainer"></div>

  <script>
    // ✅ Your Cesium ion token
    Cesium.Ion.defaultAccessToken = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiI2YjhlMmVkNC1hYWVjLTQxYWEtOGZhYS1iOGQyNDUxY2ZlMTUiLCJpZCI6MjY0Nzg3LCJpYXQiOjE3MzUxMTAzMzV9.tdJk1ppDaw9AEy9bFB6RBU9T3H0-xOlIqVlrjDBJGQo';

    // ✅ Use default terrain from Cesium ion
    Cesium.createWorldTerrainAsync().then(terrainProvider => {
      const viewer = new Cesium.Viewer('cesiumContainer', {
        terrainProvider: terrainProvider,
        baseLayerPicker: true,
        timeline: false,
        animation: false
      });

      // ✅ Load KML
      const kmlUrl = 'http://192.168.6.225:8082/al_marjan.kml'; // Replace with valid URL or server path

      Cesium.KmlDataSource.load(kmlUrl, {
        camera: viewer.scene.camera,
        canvas: viewer.scene.canvas
      }).then(dataSource => {
        viewer.dataSources.add(dataSource);
        viewer.flyTo(dataSource);
      }).catch(error => {
        console.error('Error loading KML:', error);
      });
    });
  </script>
</body>
</html> -->
<!-- 

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Cesium KML + GeoJSON Viewer</title>
  <script src="https://cesium.com/downloads/cesiumjs/releases/1.119/Build/Cesium/Cesium.js"></script>
  <link href="https://cesium.com/downloads/cesiumjs/releases/1.119/Build/Cesium/Widgets/widgets.css" rel="stylesheet">
  <style>
    html, body, #cesiumContainer {
      width: 100%;
      height: 100%;
      margin: 0;
      padding: 0;
      overflow: hidden;
    }
  </style>
</head>
<body>
  <div id="cesiumContainer"></div>

  <script>
    // ✅ Your Cesium ion token
    Cesium.Ion.defaultAccessToken = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiI2YjhlMmVkNC1hYWVjLTQxYWEtOGZhYS1iOGQyNDUxY2ZlMTUiLCJpZCI6MjY0Nzg3LCJpYXQiOjE3MzUxMTAzMzV9.tdJk1ppDaw9AEy9bFB6RBU9T3H0-xOlIqVlrjDBJGQo';

    // ✅ Create viewer with terrain
    Cesium.createWorldTerrainAsync().then(terrainProvider => {
      const viewer = new Cesium.Viewer('cesiumContainer', {
        terrainProvider: terrainProvider,
        baseLayerPicker: true,
        timeline: false,
        animation: false
      });

      // ✅ Load local KML file (must be served via a web server)
      const kmlUrl = 'http://192.168.6.225:8082/al_marjan.kml'; // Relative path if in same folder

      Cesium.KmlDataSource.load(kmlUrl, {
        camera: viewer.scene.camera,
        canvas: viewer.scene.canvas
      }).then(dataSource => {
        viewer.dataSources.add(dataSource);
      }).catch(error => {
        console.error('Error loading KML:', error);
      });

      // ✅ Load remote GeoJSON file
      const geoJsonUrl = 'http://192.168.6.225:8082/Al_marjan_island.geojson';

      Cesium.GeoJsonDataSource.load(geoJsonUrl, {
  clampToGround: false // must be false to allow extrusion
}).then(geoJsonData => {
  viewer.dataSources.add(geoJsonData);

  const defaultHeight = 20; // meters

  const entities = geoJsonData.entities.values;
  for (let i = 0; i < entities.length; i++) {
    const entity = entities[i];

    if (Cesium.defined(entity.polygon)) {
      entity.polygon.extrudedHeight = new Cesium.ConstantProperty(defaultHeight);
      entity.polygon.material = Cesium.Color.DODGERBLUE.withAlpha(0.7);
      entity.polygon.outline = true;
      entity.polygon.outlineColor = Cesium.Color.WHITE;
    }
  }

  viewer.flyTo(geoJsonData);
}).catch(error => {
  console.error('Error loading GeoJSON:', error);
});

    });
  </script>
</body>
</html> -->

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Cesium KML + GeoJSON Viewer</title>
  <script src="https://cesium.com/downloads/cesiumjs/releases/1.119/Build/Cesium/Cesium.js"></script>
  <link href="https://cesium.com/downloads/cesiumjs/releases/1.119/Build/Cesium/Widgets/widgets.css" rel="stylesheet">
  <style>
    html, body, #cesiumContainer {
      width: 100%;
      height: 100%;
      margin: 0;
      padding: 0;
      overflow: hidden;
    }
  </style>
</head>
<body>
  <div id="cesiumContainer"></div>

  <script>
    Cesium.Ion.defaultAccessToken = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiI2YjhlMmVkNC1hYWVjLTQxYWEtOGZhYS1iOGQyNDUxY2ZlMTUiLCJpZCI6MjY0Nzg3LCJpYXQiOjE3MzUxMTAzMzV9.tdJk1ppDaw9AEy9bFB6RBU9T3H0-xOlIqVlrjDBJGQo';

    Cesium.createWorldTerrainAsync().then(terrainProvider => {
      const viewer = new Cesium.Viewer('cesiumContainer', {
        terrainProvider: terrainProvider,
        baseLayerPicker: true,
        timeline: false,
        animation: false
      });

      // Load KML
      const kmlUrl = 'http://192.168.6.225:8082/al_marjan.kml';
      Cesium.KmlDataSource.load(kmlUrl, {
        camera: viewer.scene.camera,
        canvas: viewer.scene.canvas
      }).then(dataSource => {
        viewer.dataSources.add(dataSource);
      }).catch(error => {
        console.error('Error loading KML:', error);
      });

      // Load Polygon GeoJSON
      const geoJsonUrl = 'http://192.168.6.225:8082/Al_marjan_island.geojson';
      Cesium.GeoJsonDataSource.load(geoJsonUrl, {
        clampToGround: false
      }).then(geoJsonData => {
        viewer.dataSources.add(geoJsonData);

        const defaultHeight = 20;
        const entities = geoJsonData.entities.values;
        for (let i = 0; i < entities.length; i++) {
          const entity = entities[i];

          if (Cesium.defined(entity.polygon)) {
            entity.polygon.extrudedHeight = new Cesium.ConstantProperty(defaultHeight);
            entity.polygon.material = Cesium.Color.DODGERBLUE.withAlpha(0.7);
            entity.polygon.outline = true;
            entity.polygon.outlineColor = Cesium.Color.WHITE;
          }
        }

        viewer.flyTo(geoJsonData);
      }).catch(error => {
        console.error('Error loading GeoJSON:', error);
      });

      // ✅ Load Roads GeoJSON
      const roadsGeoJsonUrl = 'http://192.168.6.225:8082/al_marjan_roads.geojson';
      Cesium.GeoJsonDataSource.load(roadsGeoJsonUrl, {
        clampToGround: true
      }).then(roadsData => {
        viewer.dataSources.add(roadsData);

        const roads = roadsData.entities.values;
        for (let i = 0; i < roads.length; i++) {
          const road = roads[i];

          if (Cesium.defined(road.polyline)) {
            road.polyline.width = 3;
            road.polyline.material = Cesium.Color.YELLOW;
          }
        }
      }).catch(error => {
        console.error('Error loading Roads GeoJSON:', error);
      });

    });
  </script>
</body>
</html>
